/************************************************************************/
/*                                                                      */
/* INCLUDE                                                              */
/*                                                                      */
/************************************************************************/
#include "rhidevicecontext.h"

#include "render/rhi/rhidevice.h"
#include "render/rhi/rhiinstance.h"
#include "render/rhi/rhioutput.h"

/************************************************************************/
/*                                                                      */
/* DEFINES AND CONSTANTS                                                */
/*                                                                      */
/************************************************************************/

/************************************************************************/
/*                                                                      */
/* MACROS                                                               */
/*                                                                      */
/************************************************************************/

/************************************************************************/
/*                                                                      */
/* TYPES                                                                */
/*                                                                      */
/************************************************************************/

/************************************************************************/
/*                                                                      */
/* STRUCTS                                                              */
/*                                                                      */
/************************************************************************/

/************************************************************************/
/*                                                                      */
/* CLASSES                                                              */
/*                                                                      */
/************************************************************************/

/************************************************************************/
/*                                                                      */
/* LOCAL VARIABLES                                                      */
/*                                                                      */
/************************************************************************/

/************************************************************************/
/*                                                                      */
/* GLOBAL VARIABLES                                                     */
/*                                                                      */
/************************************************************************/

/************************************************************************/
/*                                                                      */
/* LOCAL FUNCTIONS                                                      */
/*                                                                      */
/************************************************************************/

/************************************************************************/
/*                                                                      */
/* EXTERNAL FUNCTIONS                                                   */
/*                                                                      */
/************************************************************************/

//------------------------------------------------------------------------
// RENDER CONTEXT
//------------------------------------------------------------------------

//------------------------------------------------------------------------
RHIDeviceContext::RHIDeviceContext( RHIDevice *owner, ID3D11DeviceContext *ctx ) 
   : dx_context(ctx)
{
   device = owner;
}

//------------------------------------------------------------------------
RHIDeviceContext::~RHIDeviceContext()
{
   DX_SAFE_RELEASE(dx_context);
}


//------------------------------------------------------------------------
void RHIDeviceContext::clear_state()
{
   dx_context->ClearState();
}

//------------------------------------------------------------------------
void RHIDeviceContext::flush()
{
   dx_context->Flush();
}

//------------------------------------------------------------------------
void RHIDeviceContext::clear_color_target( Texture2D *output, rgba_fl const &color ) 
{
   dx_context->ClearRenderTargetView( output->dx_rtv, color );
}


/************************************************************************/
/*                                                                      */
/* COMMANDS                                                             */
/*                                                                      */
/************************************************************************/

/************************************************************************/
/*                                                                      */
/* UNIT TESTS                                                           */
/*                                                                      */
/************************************************************************/
